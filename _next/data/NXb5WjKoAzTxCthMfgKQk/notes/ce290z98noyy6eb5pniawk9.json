{"pageProps":{"note":{"id":"ce290z98noyy6eb5pniawk9","title":"Active Directory","desc":"","updated":1654385500186,"created":1654210284561,"custom":{},"fname":"active-directory","type":"note","vault":{"fsPath":"vault"},"contentHash":"1807a7f3c6d13f77580d99b4f8a000a5","links":[],"anchors":{"what-is-active-directory":{"type":"header","text":"What is Active Directory?","value":"what-is-active-directory","line":10,"column":0,"depth":2},"why-use-active-directory":{"type":"header","text":"Why Use Active Directory?","value":"why-use-active-directory","line":24,"column":0,"depth":3},"physical-active-directory":{"type":"header","text":"Physical Active Directory","value":"physical-active-directory","line":28,"column":0,"depth":4},"ad-ds-data-store":{"type":"header","text":"AD DS Data Store","value":"ad-ds-data-store","line":40,"column":0,"depth":4},"the-forest":{"type":"header","text":"The Forest","value":"the-forest","line":49,"column":0,"depth":2},"users--groups":{"type":"header","text":"Users + Groups","value":"users--groups","line":63,"column":0,"depth":2},"users":{"type":"header","text":"Users","value":"users","line":67,"column":0,"depth":3},"groups":{"type":"header","text":"Groups","value":"groups","line":76,"column":0,"depth":3},"default-security-groups":{"type":"header","text":"Default Security Groups","value":"default-security-groups","line":83,"column":0,"depth":4},"trusts--policies":{"type":"header","text":"Trusts + Policies","value":"trusts--policies","line":145,"column":0,"depth":2},"domain-trusts":{"type":"header","text":"Domain Trusts","value":"domain-trusts","line":149,"column":0,"depth":3},"domain-policies":{"type":"header","text":"Domain Policies","value":"domain-policies","line":156,"column":0,"depth":3},"active-directory-domain-services--authentication":{"type":"header","text":"Active Directory Domain Services + Authentication","value":"active-directory-domain-services--authentication","line":163,"column":0,"depth":2},"domain-services":{"type":"header","text":"Domain Services","value":"domain-services","line":169,"column":0,"depth":3},"domain-authentication":{"type":"header","text":"Domain Authentication","value":"domain-authentication","line":181,"column":0,"depth":3},"active-directory-in-the-cloud":{"type":"header","text":"Active Directory in the Cloud","value":"active-directory-in-the-cloud","line":191,"column":0,"depth":2},"azure-ad":{"type":"header","text":"Azure AD","value":"azure-ad","line":195,"column":0,"depth":3},"cloud-security":{"type":"header","text":"Cloud Security","value":"cloud-security","line":201,"column":0,"depth":3},"active-directory-commands":{"type":"header","text":"Active Directory Commands","value":"active-directory-commands","line":215,"column":0,"depth":2}},"children":[],"parent":"3ipqfkgudo2s73dwa256ca0","data":{}},"body":"<h1 id=\"active-directory\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#active-directory\"></a>Active Directory</h1>\n<p>A directory service for Windows Domain Networks used by many companies.</p>\n<h2 id=\"what-is-active-directory\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-is-active-directory\"></a>What is Active Directory?</h2>\n<p>Active Directory\n: A collection of machines and servers connected inside of domains, that are a collective part of bigger forest of domains, make up the Active Directory network.</p>\n<ul>\n<li>Domain Controllers</li>\n<li>Forests, Trees, Domains</li>\n<li>Users + Groups</li>\n<li>Trusts</li>\n<li>Policies</li>\n<li>Domain Services</li>\n</ul>\n<p>All these parts of Active Directory make up a big network of machines and servers.</p>\n<h3 id=\"why-use-active-directory\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#why-use-active-directory\"></a>Why Use Active Directory?</h3>\n<p>Many large companies use Active Directory because it allows for the control and monitoring of the user's computers through a single domain controller. Allows for any user in the company to use any machine that the company owns, without having to set up multiple users on a machine.</p>\n<h4 id=\"physical-active-directory\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#physical-active-directory\"></a>Physical Active Directory</h4>\n<ul>\n<li>Servers and machines on-premises or anything from domain controllers and storage to user machines.</li>\n</ul>\n<p>Domain Controllers\n: A Windows server that has Active Directory Domain Services (AD DS) installed and has been promoted to a domain controller in the forest.</p>\n<ul>\n<li>Holds the AD DS data store</li>\n<li>Handles the authentication and authorization services</li>\n<li>Replicate updates from other domain controllers in the forest</li>\n<li>Allows admin access to manage domain resources</li>\n</ul>\n<h4 id=\"ad-ds-data-store\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#ad-ds-data-store\"></a>AD DS Data Store</h4>\n<p>Active Directory Data Store\n: Holds the databases and processes needed to store and manage directory information such as users, groups, and services.</p>\n<ul>\n<li>Contains the NTDS.dit - a database that contains all of the information of an Active Directory domain controller as well as password hashes for domain users.</li>\n<li>Stored by default in %SystemRoot%\\NTDS</li>\n<li>Accessible only by the domain controller</li>\n</ul>\n<h2 id=\"the-forest\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#the-forest\"></a>The Forest</h2>\n<p>Defines everything; it is the container that holds all of the other bits and pieces of the network together - without the forest, all the other trees and domains would not be able to interact.</p>\n<ul>\n<li>The \"forest\" is to describe the connection created between these trees and domains by the network.\n<ul>\n<li>A collection of one or more domain trees inside of an Active Directory network:\n<ul>\n<li><strong>Trees</strong> - Hierarchy of domains in Active Directory Domain Services</li>\n<li><strong>Domains</strong> - Used to group and manage objects</li>\n<li><strong>Organizational Units (OUs)</strong> - Containers for groups, computers, users, printers and other OUs</li>\n<li><strong>Trusts</strong> - Allows user to access resources in other domains</li>\n<li><strong>Objects</strong> - Users, groups, printers, computers, shares</li>\n<li><strong>Domain Services</strong> - DNS server, LLMNR, IPv6</li>\n<li><strong>Domain Schema</strong> - Rules for object creation</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"users--groups\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#users--groups\"></a>Users + Groups</h2>\n<p>Users and groups are inside of an Active Directory. When a domain controller is created, has default groups and two default users: Administrator and guest.</p>\n<h3 id=\"users\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#users\"></a>Users</h3>\n<p>Users are the main component to Active Directory. There are four main types of users and there could be more depending on the permissions of its users:</p>\n<ul>\n<li><strong>Domain Admins</strong> - Control the domains and only access to the domain controller</li>\n<li><strong>Service Accounts</strong> (can be Domain Admins) - Required by Windows for services such as SQL to pair a service with a service account</li>\n<li><strong>Local Administrators</strong> - These users can make changes to local machines as an administrator but cannot access the domain controller</li>\n<li><strong>Domain Users</strong> - Everyday users in the organization</li>\n</ul>\n<h3 id=\"groups\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#groups\"></a>Groups</h3>\n<p>Groups make it easier to give permissions to users and objects by organizing them into groups with specified permissions. </p>\n<ul>\n<li><strong>Security Groups</strong> - Used to specify permissions for a large number of users.</li>\n<li><strong>Distribution Groups</strong> - Used to specify email distribution lists.</li>\n</ul>\n<h4 id=\"default-security-groups\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#default-security-groups\"></a>Default Security Groups</h4>\n<p><strong>Domain Controllers</strong>\n: All domain controllers in the domain</p>\n<p><strong>Domain Guests</strong>\n: All domain guests</p>\n<p><strong>Domain Users</strong>\n: All domain users</p>\n<p><strong>Domain Computers</strong>\n: All workstations and servers joined to the domain</p>\n<p><strong>Domain Admins</strong>\n: Designated administrators of the domain</p>\n<p><strong>Enterprise Admins</strong>\n: Designated administrators of the enterprise</p>\n<p><strong>Schema Admins</strong>\n: Designated administrators of the schema</p>\n<p><strong>DNS Admins</strong>\n: DNS administrators of the group</p>\n<p><strong>DNS Update Proxy</strong>\n: DNS clients who are permitted to perform dynamic updates on behalf of some other clients (such as DHCP servers)</p>\n<p><strong>Allowed RODC Password Replication Group</strong>\n: Members in this group can have their passwords replicated to all read-only domain controllers in the domain</p>\n<p><strong>Group Policy Creator Owners</strong>\n: Members can modify group policy for the domain</p>\n<p><strong>Denied RODC Password Replication Group</strong>\n: Members cannot have their passwords replicated to any read-only domain controllers</p>\n<p><strong>Protected Users</strong>\n: Members are afforded additional protections against authentication security threats</p>\n<p><strong>Cert Publishers</strong>\n: Members are permitted to publish certificates to the directory</p>\n<p><strong>Read-Only Domain Controllers</strong>\n: Members are Read-Only Domain Controllers in the domain</p>\n<p><strong>Enterprise Read-Only Domain Controllers</strong>\n: Members are Read-Only Domain Controllers in the enterprise</p>\n<p><strong>Key Admins</strong>\n: Members can perform administrative actions on key objects within the domain</p>\n<p><strong>Enterprise Key Admins</strong>\n: Members can perform administrative actions on key objects within the forest</p>\n<p><strong>Cloneable Domain Controllers</strong>\n: Members that are domain controllers may be cloned</p>\n<p><strong>RAS and IAS Servers</strong>\n: Servers can access remote access properties of users</p>\n<h2 id=\"trusts--policies\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#trusts--policies\"></a>Trusts + Policies</h2>\n<p>Help the domain and trees communicate with each other and maintain 'security' inside of the network.</p>\n<h3 id=\"domain-trusts\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#domain-trusts\"></a>Domain Trusts</h3>\n<p>Trusts are mechanisms in place for users in the network to gain access to other resources in the domain. Trusts outline how domains inside of a forest communicate to each other, and some can be extended to external domains and forests in some cases.</p>\n<ul>\n<li><strong>Directional</strong> - The direction of the trust flows from a trusting domain to a trusted domain</li>\n<li><strong>Transitive</strong> - Trust relationship expands beyond two domains to include other trusted domains</li>\n</ul>\n<h3 id=\"domain-policies\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#domain-policies\"></a>Domain Policies</h3>\n<p>Policies dictate how the server updates and what rules it will and will not follow. They act as a rule book for Active Directory that a domain admin can modify and alter as necessary to keep the network running smoothly and securely.</p>\n<ul>\n<li>Disable Windows Defender - Disables windows defender across all machine on the domain</li>\n<li>Digitally Sign Communication (Always) - Disable or enable SMB signing on the domain controller</li>\n</ul>\n<h2 id=\"active-directory-domain-services--authentication\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#active-directory-domain-services--authentication\"></a>Active Directory Domain Services + Authentication</h2>\n<p>The Active Directory domain services are the core functions of an Active Directory network.</p>\n<p>They allow for management of the domain, security certificates, LDAPs, and much more.</p>\n<h3 id=\"domain-services\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#domain-services\"></a>Domain Services</h3>\n<p>Services that the domain controller provides to the rest of the domain or tree. There is a wide range of various services that can be added to a domain controller.</p>\n<p>The default domain services:</p>\n<p><strong>LDAP</strong> - Lightweight Directory Access Protocol provides communication between applications and directory services.</p>\n<p><strong>Certificate Services</strong> - Allows the domain controller to create, validate, and revoke public key certificates.</p>\n<p><strong>DNS, LLMNR, NBT-NS</strong> - Domain Name Services for identifying IP hostnames</p>\n<h3 id=\"domain-authentication\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#domain-authentication\"></a>Domain Authentication</h3>\n<p>There are two types of main types of authentication in place for Active Directory: NTLM and Kerberos.</p>\n<ul>\n<li><strong>Kerberos</strong> - The default authentication service for Active Directory uses ticket-granting tickets and service tickets to authenticate users and give users access to other resources across the domain.</li>\n</ul>\n<p><strong>NTLM</strong> - Default Windows authentication protocol uses an encrypted challenge/response protocol</p>\n<p>The Active Directory domain services are the main access point for attackers and contain some of the most vulnerable protocols for Active Directory.</p>\n<h2 id=\"active-directory-in-the-cloud\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#active-directory-in-the-cloud\"></a>Active Directory in the Cloud</h2>\n<p>Companies have been shifting Active Directory to cloud networks.</p>\n<h3 id=\"azure-ad\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#azure-ad\"></a>Azure AD</h3>\n<p>Azure is the most notable cloud provider and its default settings are much more secure than an on-premise physical Active Directory network; however the cloud AD may still have vulnerabilities.</p>\n<p>Azure acts as the middle man between physical Active Directory and users' sign on.</p>\n<h3 id=\"cloud-security\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#cloud-security\"></a>Cloud Security</h3>\n<p>A comparison table with a cloud Active Directory environment and a physical network.</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>Windows Server AD</th><th>Azure AD</th></tr></thead><tbody><tr><td>LDAP</td><td>Rest APIs</td></tr><tr><td>NTLM</td><td>OAuth/SAML</td></tr><tr><td>Kerberos</td><td>OpenID</td></tr><tr><td>OU Tree</td><td>Flat Structure</td></tr><tr><td>Domains and Forests</td><td>Tenants</td></tr><tr><td>Trusts</td><td>Guests</td></tr></tbody></table>\n<h2 id=\"active-directory-commands\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#active-directory-commands\"></a>Active Directory Commands</h2>\n<p><a href=\"https://activedirectorypro.com/powershell-commands/\">https://activedirectorypro.com/powershell-commands/</a></p>","noteIndex":{"id":"3ipqfkgudo2s73dwa256ca0","title":"Brain","desc":"","updated":1654212603514,"created":1651706375099,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"a83b284bd096f5e390fe503b2b0b07c7","links":[{"type":"ref","from":{"fname":"root","id":"3ipqfkgudo2s73dwa256ca0","vaultName":"vault"},"value":"cybersecurity","position":{"start":{"line":5,"column":1,"offset":76},"end":{"line":5,"column":19,"offset":94},"indent":[]},"xvault":false,"to":{"fname":"cybersecurity"}}],"anchors":{"welcome-to-tysons-vault":{"type":"header","text":"Welcome to Tyson's Vault!","value":"welcome-to-tysons-vault","line":7,"column":0,"depth":1},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":14,"column":0,"depth":2}},"children":["nkcab8fkftjfz927no2dyac","cl0utj7thwjp7bsmxe4v5va","o9kgllk4dy29wx2figqoz1w","5vhy4yxl34a7p6064a13u49","ce290z98noyy6eb5pniawk9","txeqnq5eaictderxvuifqr6","pn4fankyf3uifous1txqj5m","8ykaxd1qjsjfi1c6zsfq1eq","017vb349bxpq76wq69sai1u","wcuptt9dpzdx06nt9l6myuv","iulpmov883qv6tpqkgvbno8","8ml5picmbrjw3u887mag9dz","pd3512leoloo1qll6fr2j0o","e77elhqi5fhnpz5kdvxeudb","9k9gs0zqcs40mq2fsi5nesj","zegnyfq64amprq2yq9rnu3e","op8gluer5gorswd1xkdwwis","btat806wf3v71jpa11klryx","kldz5ejn1lvhsujdm2nyog7","9gc4nxd14um87nyud8e9ubt","ptonz0zapnutyahjkedfn8f","ixopv5geql8hlgkwk20pxow","3cschspue6elfiqxcd17tul","0f8xutu1gmbnw7xt51tim9v","87sb4tbzuopxpz736rwtx5b","d9ibeadgk68z3q2qjgsqida","woqkmy53oegpxi1ia3jl833","6ltznv32t1szgyl74knpxly","16md0j2hj1k5477uu3kclcb","2o3i5a96njb0vlfr61lslzi"],"parent":null,"data":{},"body":"# Welcome to Tyson's Vault!\n\nThis is my place store all my cool knowledge.\n\n![[cybersecurity]]\n\n\n## Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enableHandlebarTemplates":false,"templateHierarchy":"template","enableSmartRefs":true,"dendronVersion":"0.83.0"},"preview":{"theme":"dark","enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"logoPath":"https://clipground.com/images/cyber-logo-3.jpg","theme":"dark","siteUrl":"https://tysonnguyen.github.io","assetsPrefix":"/IBM-cybersecurity","enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Cybersecurity","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree","editRepository":"https://github.com/TysonNguyen/IBM-cybersecurity"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enablePrettyLinks":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"enableTaskNotes":true,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}