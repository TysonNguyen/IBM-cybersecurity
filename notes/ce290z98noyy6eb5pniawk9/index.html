<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><title>Active Directory</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal Knowledge Space"/><meta property="og:title" content="Active Directory"/><meta property="og:description" content="Personal Knowledge Space"/><meta property="og:url" content="https://tysonnguyen.github.io/IBM-cybersecurity/notes/ce290z98noyy6eb5pniawk9/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="6/2/2022"/><meta property="article:modified_time" content="6/4/2022"/><link rel="canonical" href="https://tysonnguyen.github.io/IBM-cybersecurity/notes/ce290z98noyy6eb5pniawk9/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/IBM-cybersecurity/_next/static/css/0aeb6c71ee87f6df.css" as="style"/><link rel="stylesheet" href="/IBM-cybersecurity/_next/static/css/0aeb6c71ee87f6df.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/IBM-cybersecurity/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/IBM-cybersecurity/_next/static/chunks/webpack-b7a0bb0748951285.js" defer=""></script><script src="/IBM-cybersecurity/_next/static/chunks/framework-bb5c596eafb42b22.js" defer=""></script><script src="/IBM-cybersecurity/_next/static/chunks/main-3d5e78ffcdd2778f.js" defer=""></script><script src="/IBM-cybersecurity/_next/static/chunks/pages/_app-b0ef1900ae658bfa.js" defer=""></script><script src="/IBM-cybersecurity/_next/static/chunks/78-13ae6acd5ce7ca5b.js" defer=""></script><script src="/IBM-cybersecurity/_next/static/chunks/373-2f3879190a46a3d9.js" defer=""></script><script src="/IBM-cybersecurity/_next/static/chunks/pages/notes/%5Bid%5D-69449972c2a725d8.js" defer=""></script><script src="/IBM-cybersecurity/_next/static/NXb5WjKoAzTxCthMfgKQk/_buildManifest.js" defer=""></script><script src="/IBM-cybersecurity/_next/static/NXb5WjKoAzTxCthMfgKQk/_ssgManifest.js" defer=""></script><script src="/IBM-cybersecurity/_next/static/NXb5WjKoAzTxCthMfgKQk/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout site-layout" style="margin-top:64px"><section class="ant-layout site-layout"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><section class="ant-layout side-layout-main" style="max-width:1200px;display:initial"><main class="ant-layout-content main-content" role="main" style="padding:0 24px"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="active-directory"><a aria-hidden="true" class="anchor-heading icon-link" href="#active-directory"></a>Active Directory</h1>
<p>A directory service for Windows Domain Networks used by many companies.</p>
<h2 id="what-is-active-directory"><a aria-hidden="true" class="anchor-heading icon-link" href="#what-is-active-directory"></a>What is Active Directory?</h2>
<p>Active Directory
: A collection of machines and servers connected inside of domains, that are a collective part of bigger forest of domains, make up the Active Directory network.</p>
<ul>
<li>Domain Controllers</li>
<li>Forests, Trees, Domains</li>
<li>Users + Groups</li>
<li>Trusts</li>
<li>Policies</li>
<li>Domain Services</li>
</ul>
<p>All these parts of Active Directory make up a big network of machines and servers.</p>
<h3 id="why-use-active-directory"><a aria-hidden="true" class="anchor-heading icon-link" href="#why-use-active-directory"></a>Why Use Active Directory?</h3>
<p>Many large companies use Active Directory because it allows for the control and monitoring of the user's computers through a single domain controller. Allows for any user in the company to use any machine that the company owns, without having to set up multiple users on a machine.</p>
<h4 id="physical-active-directory"><a aria-hidden="true" class="anchor-heading icon-link" href="#physical-active-directory"></a>Physical Active Directory</h4>
<ul>
<li>Servers and machines on-premises or anything from domain controllers and storage to user machines.</li>
</ul>
<p>Domain Controllers
: A Windows server that has Active Directory Domain Services (AD DS) installed and has been promoted to a domain controller in the forest.</p>
<ul>
<li>Holds the AD DS data store</li>
<li>Handles the authentication and authorization services</li>
<li>Replicate updates from other domain controllers in the forest</li>
<li>Allows admin access to manage domain resources</li>
</ul>
<h4 id="ad-ds-data-store"><a aria-hidden="true" class="anchor-heading icon-link" href="#ad-ds-data-store"></a>AD DS Data Store</h4>
<p>Active Directory Data Store
: Holds the databases and processes needed to store and manage directory information such as users, groups, and services.</p>
<ul>
<li>Contains the NTDS.dit - a database that contains all of the information of an Active Directory domain controller as well as password hashes for domain users.</li>
<li>Stored by default in %SystemRoot%\NTDS</li>
<li>Accessible only by the domain controller</li>
</ul>
<h2 id="the-forest"><a aria-hidden="true" class="anchor-heading icon-link" href="#the-forest"></a>The Forest</h2>
<p>Defines everything; it is the container that holds all of the other bits and pieces of the network together - without the forest, all the other trees and domains would not be able to interact.</p>
<ul>
<li>The "forest" is to describe the connection created between these trees and domains by the network.
<ul>
<li>A collection of one or more domain trees inside of an Active Directory network:
<ul>
<li><strong>Trees</strong> - Hierarchy of domains in Active Directory Domain Services</li>
<li><strong>Domains</strong> - Used to group and manage objects</li>
<li><strong>Organizational Units (OUs)</strong> - Containers for groups, computers, users, printers and other OUs</li>
<li><strong>Trusts</strong> - Allows user to access resources in other domains</li>
<li><strong>Objects</strong> - Users, groups, printers, computers, shares</li>
<li><strong>Domain Services</strong> - DNS server, LLMNR, IPv6</li>
<li><strong>Domain Schema</strong> - Rules for object creation</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="users--groups"><a aria-hidden="true" class="anchor-heading icon-link" href="#users--groups"></a>Users + Groups</h2>
<p>Users and groups are inside of an Active Directory. When a domain controller is created, has default groups and two default users: Administrator and guest.</p>
<h3 id="users"><a aria-hidden="true" class="anchor-heading icon-link" href="#users"></a>Users</h3>
<p>Users are the main component to Active Directory. There are four main types of users and there could be more depending on the permissions of its users:</p>
<ul>
<li><strong>Domain Admins</strong> - Control the domains and only access to the domain controller</li>
<li><strong>Service Accounts</strong> (can be Domain Admins) - Required by Windows for services such as SQL to pair a service with a service account</li>
<li><strong>Local Administrators</strong> - These users can make changes to local machines as an administrator but cannot access the domain controller</li>
<li><strong>Domain Users</strong> - Everyday users in the organization</li>
</ul>
<h3 id="groups"><a aria-hidden="true" class="anchor-heading icon-link" href="#groups"></a>Groups</h3>
<p>Groups make it easier to give permissions to users and objects by organizing them into groups with specified permissions. </p>
<ul>
<li><strong>Security Groups</strong> - Used to specify permissions for a large number of users.</li>
<li><strong>Distribution Groups</strong> - Used to specify email distribution lists.</li>
</ul>
<h4 id="default-security-groups"><a aria-hidden="true" class="anchor-heading icon-link" href="#default-security-groups"></a>Default Security Groups</h4>
<p><strong>Domain Controllers</strong>
: All domain controllers in the domain</p>
<p><strong>Domain Guests</strong>
: All domain guests</p>
<p><strong>Domain Users</strong>
: All domain users</p>
<p><strong>Domain Computers</strong>
: All workstations and servers joined to the domain</p>
<p><strong>Domain Admins</strong>
: Designated administrators of the domain</p>
<p><strong>Enterprise Admins</strong>
: Designated administrators of the enterprise</p>
<p><strong>Schema Admins</strong>
: Designated administrators of the schema</p>
<p><strong>DNS Admins</strong>
: DNS administrators of the group</p>
<p><strong>DNS Update Proxy</strong>
: DNS clients who are permitted to perform dynamic updates on behalf of some other clients (such as DHCP servers)</p>
<p><strong>Allowed RODC Password Replication Group</strong>
: Members in this group can have their passwords replicated to all read-only domain controllers in the domain</p>
<p><strong>Group Policy Creator Owners</strong>
: Members can modify group policy for the domain</p>
<p><strong>Denied RODC Password Replication Group</strong>
: Members cannot have their passwords replicated to any read-only domain controllers</p>
<p><strong>Protected Users</strong>
: Members are afforded additional protections against authentication security threats</p>
<p><strong>Cert Publishers</strong>
: Members are permitted to publish certificates to the directory</p>
<p><strong>Read-Only Domain Controllers</strong>
: Members are Read-Only Domain Controllers in the domain</p>
<p><strong>Enterprise Read-Only Domain Controllers</strong>
: Members are Read-Only Domain Controllers in the enterprise</p>
<p><strong>Key Admins</strong>
: Members can perform administrative actions on key objects within the domain</p>
<p><strong>Enterprise Key Admins</strong>
: Members can perform administrative actions on key objects within the forest</p>
<p><strong>Cloneable Domain Controllers</strong>
: Members that are domain controllers may be cloned</p>
<p><strong>RAS and IAS Servers</strong>
: Servers can access remote access properties of users</p>
<h2 id="trusts--policies"><a aria-hidden="true" class="anchor-heading icon-link" href="#trusts--policies"></a>Trusts + Policies</h2>
<p>Help the domain and trees communicate with each other and maintain 'security' inside of the network.</p>
<h3 id="domain-trusts"><a aria-hidden="true" class="anchor-heading icon-link" href="#domain-trusts"></a>Domain Trusts</h3>
<p>Trusts are mechanisms in place for users in the network to gain access to other resources in the domain. Trusts outline how domains inside of a forest communicate to each other, and some can be extended to external domains and forests in some cases.</p>
<ul>
<li><strong>Directional</strong> - The direction of the trust flows from a trusting domain to a trusted domain</li>
<li><strong>Transitive</strong> - Trust relationship expands beyond two domains to include other trusted domains</li>
</ul>
<h3 id="domain-policies"><a aria-hidden="true" class="anchor-heading icon-link" href="#domain-policies"></a>Domain Policies</h3>
<p>Policies dictate how the server updates and what rules it will and will not follow. They act as a rule book for Active Directory that a domain admin can modify and alter as necessary to keep the network running smoothly and securely.</p>
<ul>
<li>Disable Windows Defender - Disables windows defender across all machine on the domain</li>
<li>Digitally Sign Communication (Always) - Disable or enable SMB signing on the domain controller</li>
</ul>
<h2 id="active-directory-domain-services--authentication"><a aria-hidden="true" class="anchor-heading icon-link" href="#active-directory-domain-services--authentication"></a>Active Directory Domain Services + Authentication</h2>
<p>The Active Directory domain services are the core functions of an Active Directory network.</p>
<p>They allow for management of the domain, security certificates, LDAPs, and much more.</p>
<h3 id="domain-services"><a aria-hidden="true" class="anchor-heading icon-link" href="#domain-services"></a>Domain Services</h3>
<p>Services that the domain controller provides to the rest of the domain or tree. There is a wide range of various services that can be added to a domain controller.</p>
<p>The default domain services:</p>
<p><strong>LDAP</strong> - Lightweight Directory Access Protocol provides communication between applications and directory services.</p>
<p><strong>Certificate Services</strong> - Allows the domain controller to create, validate, and revoke public key certificates.</p>
<p><strong>DNS, LLMNR, NBT-NS</strong> - Domain Name Services for identifying IP hostnames</p>
<h3 id="domain-authentication"><a aria-hidden="true" class="anchor-heading icon-link" href="#domain-authentication"></a>Domain Authentication</h3>
<p>There are two types of main types of authentication in place for Active Directory: NTLM and Kerberos.</p>
<ul>
<li><strong>Kerberos</strong> - The default authentication service for Active Directory uses ticket-granting tickets and service tickets to authenticate users and give users access to other resources across the domain.</li>
</ul>
<p><strong>NTLM</strong> - Default Windows authentication protocol uses an encrypted challenge/response protocol</p>
<p>The Active Directory domain services are the main access point for attackers and contain some of the most vulnerable protocols for Active Directory.</p>
<h2 id="active-directory-in-the-cloud"><a aria-hidden="true" class="anchor-heading icon-link" href="#active-directory-in-the-cloud"></a>Active Directory in the Cloud</h2>
<p>Companies have been shifting Active Directory to cloud networks.</p>
<h3 id="azure-ad"><a aria-hidden="true" class="anchor-heading icon-link" href="#azure-ad"></a>Azure AD</h3>
<p>Azure is the most notable cloud provider and its default settings are much more secure than an on-premise physical Active Directory network; however the cloud AD may still have vulnerabilities.</p>
<p>Azure acts as the middle man between physical Active Directory and users' sign on.</p>
<h3 id="cloud-security"><a aria-hidden="true" class="anchor-heading icon-link" href="#cloud-security"></a>Cloud Security</h3>
<p>A comparison table with a cloud Active Directory environment and a physical network.</p>

































<table><thead><tr><th>Windows Server AD</th><th>Azure AD</th></tr></thead><tbody><tr><td>LDAP</td><td>Rest APIs</td></tr><tr><td>NTLM</td><td>OAuth/SAML</td></tr><tr><td>Kerberos</td><td>OpenID</td></tr><tr><td>OU Tree</td><td>Flat Structure</td></tr><tr><td>Domains and Forests</td><td>Tenants</td></tr><tr><td>Trusts</td><td>Guests</td></tr></tbody></table>
<h2 id="active-directory-commands"><a aria-hidden="true" class="anchor-heading icon-link" href="#active-directory-commands"></a>Active Directory Commands</h2>
<p><a href="https://activedirectorypro.com/powershell-commands/">https://activedirectorypro.com/powershell-commands/</a></p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#what-is-active-directory" title="What is Active Directory?">What is Active Directory?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#why-use-active-directory" title="Why Use Active Directory?">Why Use Active Directory?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#physical-active-directory" title="Physical Active Directory">Physical Active Directory</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#ad-ds-data-store" title="AD DS Data Store">AD DS Data Store</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#the-forest" title="The Forest">The Forest</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#users--groups" title="Users + Groups">Users + Groups</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#users" title="Users">Users</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#groups" title="Groups">Groups</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#default-security-groups" title="Default Security Groups">Default Security Groups</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#trusts--policies" title="Trusts + Policies">Trusts + Policies</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#domain-trusts" title="Domain Trusts">Domain Trusts</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#domain-policies" title="Domain Policies">Domain Policies</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#active-directory-domain-services--authentication" title="Active Directory Domain Services + Authentication">Active Directory Domain Services + Authentication</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#domain-services" title="Domain Services">Domain Services</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#domain-authentication" title="Domain Authentication">Domain Authentication</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#active-directory-in-the-cloud" title="Active Directory in the Cloud">Active Directory in the Cloud</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#azure-ad" title="Azure AD">Azure AD</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#cloud-security" title="Cloud Security">Cloud Security</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#active-directory-commands" title="Active Directory Commands">Active Directory Commands</a></div></div></div></div></div></div></div></div></div></main><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></section></section></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"ce290z98noyy6eb5pniawk9","title":"Active Directory","desc":"","updated":1654385500186,"created":1654210284561,"custom":{},"fname":"active-directory","type":"note","vault":{"fsPath":"vault"},"contentHash":"1807a7f3c6d13f77580d99b4f8a000a5","links":[],"anchors":{"what-is-active-directory":{"type":"header","text":"What is Active Directory?","value":"what-is-active-directory","line":10,"column":0,"depth":2},"why-use-active-directory":{"type":"header","text":"Why Use Active Directory?","value":"why-use-active-directory","line":24,"column":0,"depth":3},"physical-active-directory":{"type":"header","text":"Physical Active Directory","value":"physical-active-directory","line":28,"column":0,"depth":4},"ad-ds-data-store":{"type":"header","text":"AD DS Data Store","value":"ad-ds-data-store","line":40,"column":0,"depth":4},"the-forest":{"type":"header","text":"The Forest","value":"the-forest","line":49,"column":0,"depth":2},"users--groups":{"type":"header","text":"Users + Groups","value":"users--groups","line":63,"column":0,"depth":2},"users":{"type":"header","text":"Users","value":"users","line":67,"column":0,"depth":3},"groups":{"type":"header","text":"Groups","value":"groups","line":76,"column":0,"depth":3},"default-security-groups":{"type":"header","text":"Default Security Groups","value":"default-security-groups","line":83,"column":0,"depth":4},"trusts--policies":{"type":"header","text":"Trusts + Policies","value":"trusts--policies","line":145,"column":0,"depth":2},"domain-trusts":{"type":"header","text":"Domain Trusts","value":"domain-trusts","line":149,"column":0,"depth":3},"domain-policies":{"type":"header","text":"Domain Policies","value":"domain-policies","line":156,"column":0,"depth":3},"active-directory-domain-services--authentication":{"type":"header","text":"Active Directory Domain Services + Authentication","value":"active-directory-domain-services--authentication","line":163,"column":0,"depth":2},"domain-services":{"type":"header","text":"Domain Services","value":"domain-services","line":169,"column":0,"depth":3},"domain-authentication":{"type":"header","text":"Domain Authentication","value":"domain-authentication","line":181,"column":0,"depth":3},"active-directory-in-the-cloud":{"type":"header","text":"Active Directory in the Cloud","value":"active-directory-in-the-cloud","line":191,"column":0,"depth":2},"azure-ad":{"type":"header","text":"Azure AD","value":"azure-ad","line":195,"column":0,"depth":3},"cloud-security":{"type":"header","text":"Cloud Security","value":"cloud-security","line":201,"column":0,"depth":3},"active-directory-commands":{"type":"header","text":"Active Directory Commands","value":"active-directory-commands","line":215,"column":0,"depth":2}},"children":[],"parent":"3ipqfkgudo2s73dwa256ca0","data":{}},"body":"\u003ch1 id=\"active-directory\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#active-directory\"\u003e\u003c/a\u003eActive Directory\u003c/h1\u003e\n\u003cp\u003eA directory service for Windows Domain Networks used by many companies.\u003c/p\u003e\n\u003ch2 id=\"what-is-active-directory\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-is-active-directory\"\u003e\u003c/a\u003eWhat is Active Directory?\u003c/h2\u003e\n\u003cp\u003eActive Directory\n: A collection of machines and servers connected inside of domains, that are a collective part of bigger forest of domains, make up the Active Directory network.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDomain Controllers\u003c/li\u003e\n\u003cli\u003eForests, Trees, Domains\u003c/li\u003e\n\u003cli\u003eUsers + Groups\u003c/li\u003e\n\u003cli\u003eTrusts\u003c/li\u003e\n\u003cli\u003ePolicies\u003c/li\u003e\n\u003cli\u003eDomain Services\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAll these parts of Active Directory make up a big network of machines and servers.\u003c/p\u003e\n\u003ch3 id=\"why-use-active-directory\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#why-use-active-directory\"\u003e\u003c/a\u003eWhy Use Active Directory?\u003c/h3\u003e\n\u003cp\u003eMany large companies use Active Directory because it allows for the control and monitoring of the user's computers through a single domain controller. Allows for any user in the company to use any machine that the company owns, without having to set up multiple users on a machine.\u003c/p\u003e\n\u003ch4 id=\"physical-active-directory\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#physical-active-directory\"\u003e\u003c/a\u003ePhysical Active Directory\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eServers and machines on-premises or anything from domain controllers and storage to user machines.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eDomain Controllers\n: A Windows server that has Active Directory Domain Services (AD DS) installed and has been promoted to a domain controller in the forest.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eHolds the AD DS data store\u003c/li\u003e\n\u003cli\u003eHandles the authentication and authorization services\u003c/li\u003e\n\u003cli\u003eReplicate updates from other domain controllers in the forest\u003c/li\u003e\n\u003cli\u003eAllows admin access to manage domain resources\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"ad-ds-data-store\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#ad-ds-data-store\"\u003e\u003c/a\u003eAD DS Data Store\u003c/h4\u003e\n\u003cp\u003eActive Directory Data Store\n: Holds the databases and processes needed to store and manage directory information such as users, groups, and services.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eContains the NTDS.dit - a database that contains all of the information of an Active Directory domain controller as well as password hashes for domain users.\u003c/li\u003e\n\u003cli\u003eStored by default in %SystemRoot%\\NTDS\u003c/li\u003e\n\u003cli\u003eAccessible only by the domain controller\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"the-forest\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#the-forest\"\u003e\u003c/a\u003eThe Forest\u003c/h2\u003e\n\u003cp\u003eDefines everything; it is the container that holds all of the other bits and pieces of the network together - without the forest, all the other trees and domains would not be able to interact.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThe \"forest\" is to describe the connection created between these trees and domains by the network.\n\u003cul\u003e\n\u003cli\u003eA collection of one or more domain trees inside of an Active Directory network:\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eTrees\u003c/strong\u003e - Hierarchy of domains in Active Directory Domain Services\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDomains\u003c/strong\u003e - Used to group and manage objects\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eOrganizational Units (OUs)\u003c/strong\u003e - Containers for groups, computers, users, printers and other OUs\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTrusts\u003c/strong\u003e - Allows user to access resources in other domains\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eObjects\u003c/strong\u003e - Users, groups, printers, computers, shares\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDomain Services\u003c/strong\u003e - DNS server, LLMNR, IPv6\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDomain Schema\u003c/strong\u003e - Rules for object creation\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"users--groups\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#users--groups\"\u003e\u003c/a\u003eUsers + Groups\u003c/h2\u003e\n\u003cp\u003eUsers and groups are inside of an Active Directory. When a domain controller is created, has default groups and two default users: Administrator and guest.\u003c/p\u003e\n\u003ch3 id=\"users\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#users\"\u003e\u003c/a\u003eUsers\u003c/h3\u003e\n\u003cp\u003eUsers are the main component to Active Directory. There are four main types of users and there could be more depending on the permissions of its users:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eDomain Admins\u003c/strong\u003e - Control the domains and only access to the domain controller\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eService Accounts\u003c/strong\u003e (can be Domain Admins) - Required by Windows for services such as SQL to pair a service with a service account\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLocal Administrators\u003c/strong\u003e - These users can make changes to local machines as an administrator but cannot access the domain controller\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDomain Users\u003c/strong\u003e - Everyday users in the organization\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"groups\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#groups\"\u003e\u003c/a\u003eGroups\u003c/h3\u003e\n\u003cp\u003eGroups make it easier to give permissions to users and objects by organizing them into groups with specified permissions. \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eSecurity Groups\u003c/strong\u003e - Used to specify permissions for a large number of users.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDistribution Groups\u003c/strong\u003e - Used to specify email distribution lists.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"default-security-groups\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#default-security-groups\"\u003e\u003c/a\u003eDefault Security Groups\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003eDomain Controllers\u003c/strong\u003e\n: All domain controllers in the domain\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDomain Guests\u003c/strong\u003e\n: All domain guests\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDomain Users\u003c/strong\u003e\n: All domain users\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDomain Computers\u003c/strong\u003e\n: All workstations and servers joined to the domain\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDomain Admins\u003c/strong\u003e\n: Designated administrators of the domain\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eEnterprise Admins\u003c/strong\u003e\n: Designated administrators of the enterprise\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eSchema Admins\u003c/strong\u003e\n: Designated administrators of the schema\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDNS Admins\u003c/strong\u003e\n: DNS administrators of the group\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDNS Update Proxy\u003c/strong\u003e\n: DNS clients who are permitted to perform dynamic updates on behalf of some other clients (such as DHCP servers)\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eAllowed RODC Password Replication Group\u003c/strong\u003e\n: Members in this group can have their passwords replicated to all read-only domain controllers in the domain\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eGroup Policy Creator Owners\u003c/strong\u003e\n: Members can modify group policy for the domain\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDenied RODC Password Replication Group\u003c/strong\u003e\n: Members cannot have their passwords replicated to any read-only domain controllers\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eProtected Users\u003c/strong\u003e\n: Members are afforded additional protections against authentication security threats\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eCert Publishers\u003c/strong\u003e\n: Members are permitted to publish certificates to the directory\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eRead-Only Domain Controllers\u003c/strong\u003e\n: Members are Read-Only Domain Controllers in the domain\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eEnterprise Read-Only Domain Controllers\u003c/strong\u003e\n: Members are Read-Only Domain Controllers in the enterprise\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eKey Admins\u003c/strong\u003e\n: Members can perform administrative actions on key objects within the domain\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eEnterprise Key Admins\u003c/strong\u003e\n: Members can perform administrative actions on key objects within the forest\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eCloneable Domain Controllers\u003c/strong\u003e\n: Members that are domain controllers may be cloned\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eRAS and IAS Servers\u003c/strong\u003e\n: Servers can access remote access properties of users\u003c/p\u003e\n\u003ch2 id=\"trusts--policies\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#trusts--policies\"\u003e\u003c/a\u003eTrusts + Policies\u003c/h2\u003e\n\u003cp\u003eHelp the domain and trees communicate with each other and maintain 'security' inside of the network.\u003c/p\u003e\n\u003ch3 id=\"domain-trusts\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#domain-trusts\"\u003e\u003c/a\u003eDomain Trusts\u003c/h3\u003e\n\u003cp\u003eTrusts are mechanisms in place for users in the network to gain access to other resources in the domain. Trusts outline how domains inside of a forest communicate to each other, and some can be extended to external domains and forests in some cases.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eDirectional\u003c/strong\u003e - The direction of the trust flows from a trusting domain to a trusted domain\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTransitive\u003c/strong\u003e - Trust relationship expands beyond two domains to include other trusted domains\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"domain-policies\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#domain-policies\"\u003e\u003c/a\u003eDomain Policies\u003c/h3\u003e\n\u003cp\u003ePolicies dictate how the server updates and what rules it will and will not follow. They act as a rule book for Active Directory that a domain admin can modify and alter as necessary to keep the network running smoothly and securely.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDisable Windows Defender - Disables windows defender across all machine on the domain\u003c/li\u003e\n\u003cli\u003eDigitally Sign Communication (Always) - Disable or enable SMB signing on the domain controller\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"active-directory-domain-services--authentication\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#active-directory-domain-services--authentication\"\u003e\u003c/a\u003eActive Directory Domain Services + Authentication\u003c/h2\u003e\n\u003cp\u003eThe Active Directory domain services are the core functions of an Active Directory network.\u003c/p\u003e\n\u003cp\u003eThey allow for management of the domain, security certificates, LDAPs, and much more.\u003c/p\u003e\n\u003ch3 id=\"domain-services\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#domain-services\"\u003e\u003c/a\u003eDomain Services\u003c/h3\u003e\n\u003cp\u003eServices that the domain controller provides to the rest of the domain or tree. There is a wide range of various services that can be added to a domain controller.\u003c/p\u003e\n\u003cp\u003eThe default domain services:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eLDAP\u003c/strong\u003e - Lightweight Directory Access Protocol provides communication between applications and directory services.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eCertificate Services\u003c/strong\u003e - Allows the domain controller to create, validate, and revoke public key certificates.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDNS, LLMNR, NBT-NS\u003c/strong\u003e - Domain Name Services for identifying IP hostnames\u003c/p\u003e\n\u003ch3 id=\"domain-authentication\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#domain-authentication\"\u003e\u003c/a\u003eDomain Authentication\u003c/h3\u003e\n\u003cp\u003eThere are two types of main types of authentication in place for Active Directory: NTLM and Kerberos.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eKerberos\u003c/strong\u003e - The default authentication service for Active Directory uses ticket-granting tickets and service tickets to authenticate users and give users access to other resources across the domain.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eNTLM\u003c/strong\u003e - Default Windows authentication protocol uses an encrypted challenge/response protocol\u003c/p\u003e\n\u003cp\u003eThe Active Directory domain services are the main access point for attackers and contain some of the most vulnerable protocols for Active Directory.\u003c/p\u003e\n\u003ch2 id=\"active-directory-in-the-cloud\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#active-directory-in-the-cloud\"\u003e\u003c/a\u003eActive Directory in the Cloud\u003c/h2\u003e\n\u003cp\u003eCompanies have been shifting Active Directory to cloud networks.\u003c/p\u003e\n\u003ch3 id=\"azure-ad\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#azure-ad\"\u003e\u003c/a\u003eAzure AD\u003c/h3\u003e\n\u003cp\u003eAzure is the most notable cloud provider and its default settings are much more secure than an on-premise physical Active Directory network; however the cloud AD may still have vulnerabilities.\u003c/p\u003e\n\u003cp\u003eAzure acts as the middle man between physical Active Directory and users' sign on.\u003c/p\u003e\n\u003ch3 id=\"cloud-security\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#cloud-security\"\u003e\u003c/a\u003eCloud Security\u003c/h3\u003e\n\u003cp\u003eA comparison table with a cloud Active Directory environment and a physical network.\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003eWindows Server AD\u003c/th\u003e\u003cth\u003eAzure AD\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eLDAP\u003c/td\u003e\u003ctd\u003eRest APIs\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eNTLM\u003c/td\u003e\u003ctd\u003eOAuth/SAML\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eKerberos\u003c/td\u003e\u003ctd\u003eOpenID\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eOU Tree\u003c/td\u003e\u003ctd\u003eFlat Structure\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eDomains and Forests\u003c/td\u003e\u003ctd\u003eTenants\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eTrusts\u003c/td\u003e\u003ctd\u003eGuests\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003ch2 id=\"active-directory-commands\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#active-directory-commands\"\u003e\u003c/a\u003eActive Directory Commands\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://activedirectorypro.com/powershell-commands/\"\u003ehttps://activedirectorypro.com/powershell-commands/\u003c/a\u003e\u003c/p\u003e","noteIndex":{"id":"3ipqfkgudo2s73dwa256ca0","title":"Brain","desc":"","updated":1654212603514,"created":1651706375099,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"a83b284bd096f5e390fe503b2b0b07c7","links":[{"type":"ref","from":{"fname":"root","id":"3ipqfkgudo2s73dwa256ca0","vaultName":"vault"},"value":"cybersecurity","position":{"start":{"line":5,"column":1,"offset":76},"end":{"line":5,"column":19,"offset":94},"indent":[]},"xvault":false,"to":{"fname":"cybersecurity"}}],"anchors":{"welcome-to-tysons-vault":{"type":"header","text":"Welcome to Tyson's Vault!","value":"welcome-to-tysons-vault","line":7,"column":0,"depth":1},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":14,"column":0,"depth":2}},"children":["nkcab8fkftjfz927no2dyac","cl0utj7thwjp7bsmxe4v5va","o9kgllk4dy29wx2figqoz1w","5vhy4yxl34a7p6064a13u49","ce290z98noyy6eb5pniawk9","txeqnq5eaictderxvuifqr6","pn4fankyf3uifous1txqj5m","8ykaxd1qjsjfi1c6zsfq1eq","017vb349bxpq76wq69sai1u","wcuptt9dpzdx06nt9l6myuv","iulpmov883qv6tpqkgvbno8","8ml5picmbrjw3u887mag9dz","pd3512leoloo1qll6fr2j0o","e77elhqi5fhnpz5kdvxeudb","9k9gs0zqcs40mq2fsi5nesj","zegnyfq64amprq2yq9rnu3e","op8gluer5gorswd1xkdwwis","btat806wf3v71jpa11klryx","kldz5ejn1lvhsujdm2nyog7","9gc4nxd14um87nyud8e9ubt","ptonz0zapnutyahjkedfn8f","ixopv5geql8hlgkwk20pxow","3cschspue6elfiqxcd17tul","0f8xutu1gmbnw7xt51tim9v","87sb4tbzuopxpz736rwtx5b","d9ibeadgk68z3q2qjgsqida","woqkmy53oegpxi1ia3jl833","6ltznv32t1szgyl74knpxly","16md0j2hj1k5477uu3kclcb","2o3i5a96njb0vlfr61lslzi"],"parent":null,"data":{},"body":"# Welcome to Tyson's Vault!\n\nThis is my place store all my cool knowledge.\n\n![[cybersecurity]]\n\n\n## Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enableHandlebarTemplates":false,"templateHierarchy":"template","enableSmartRefs":true,"dendronVersion":"0.83.0"},"preview":{"theme":"dark","enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"logoPath":"https://clipground.com/images/cyber-logo-3.jpg","theme":"dark","siteUrl":"https://tysonnguyen.github.io","assetsPrefix":"/IBM-cybersecurity","enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Cybersecurity","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree","editRepository":"https://github.com/TysonNguyen/IBM-cybersecurity"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enablePrettyLinks":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"enableTaskNotes":true,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"ce290z98noyy6eb5pniawk9"},"buildId":"NXb5WjKoAzTxCthMfgKQk","assetPrefix":"/IBM-cybersecurity","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>